<div class="content" role="main">
    <h1 style="padding-top: 150px; font-family:'Times New Roman', Times, serif; font-size:xx-large;">My Cart</h1>



  <div class="card-container" *ngFor="let item of carts">
    <div class="card" style="width: 700px;">
        <div style="margin-left: 20px;" *ngIf="item.cartItems && item.cartItems.length > 0">
            <div *ngFor="let cartItem of item.cartItems">
                <div class="card" style="width: 600px; height: 320px;">
              <button mat-icon-button class="delete-button" (click)="removeItem(cartItem.cartItemID)">
                  <mat-icon>delete</mat-icon>
                </button>
              <img src="/assets/Logo.png" alt="Logo" style="width: 150px; height:250px; align-items: center; margin-top: 5px;">
              <div class="book-info">
                <h3 style="margin-left: 20px;"><strong>{{ cartItem.title }}</strong></h3>
                <div style="margin-left: 20px;">
                    <p>Book ID: {{ cartItem.bookID }}</p> 
                  <p>Author: {{ cartItem.author }}</p>
                  <p>Date of Publication: {{ cartItem.dateOfPublication }}</p>
                  <p>Version: {{ cartItem.version }}</p>
                </div>

              <div class="card" style="margin-left: 20px;">
              <p>
                  
                  Quantity: 
  
                  <button mat-icon-button  (click)="decreaseQuantity(cartItem.cartItemID, cartItem.quantity)">
                      <mat-icon>remove</mat-icon>
                    </button>
  
                  {{ cartItem.quantity }}
  
                  <button mat-icon-button (click)="increaseQuantity(cartItem.cartItemID, cartItem.quantity, cartItem.numberOfBooksInStock)">
                      <mat-icon>add</mat-icon> 
                  </button>
                  
              </p>
              <p style="color: red; font-size:x-small; padding-top: 20px;">Number of items availble: {{ cartItem.numberOfBooksInStock }} at R{{ cartItem.price }} each</p>

              <!-- <p style="color: red; font-size:x-small;">Price Per Unit: R{{ cartItem.price }}</p> -->

            </div>

              <p class="total"><strong>Total Price: R{{calculateTotalPrice(cartItem.quantity, cartItem.price)}}</strong></p>

              </div>
            </div>
  
            </div>
          </div>
    
          <div *ngIf="!item.cartItems || item.cartItems.length === 0">
            <p>There are no items in your cart.</p>
          </div>
    </div>
    <div class="card" style="width: 700px; height: 100px;">
        <div style="margin-left: 20px;" *ngIf="item.cartItems && item.cartItems.length > 0">
              
              <h3><strong>Cart Total:</strong></h3>

              <h5><strong>Cart Total: {{(totalPrice/item.cartItems.length).toFixed(2)}}</strong></h5>
              
              <div class="total" style="display: flex; flex-direction: column; align-items: center; margin-bottom: 20px;">
                  <button mat-flat-button color="primary">Checkout</button>
              </div>

          </div>
    </div>
  </div>
  
  
  <router-outlet></router-outlet>
  
